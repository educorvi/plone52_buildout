[buildout]
extends = base.cfg
parts += 
    backup
    supervisor
    supervisor-reboot
    pack-backup
    zeoserver
    client1
    client2
    client3
backups-dir=${buildout:var-dir}


[pack-backup]
recipe = z3c.recipe.usercrontab
times = 00 3 * * *
command = ${buildout:directory}/bin/zeopack && ${buildout:directory}/bin/backup


[supervisor-reboot]
recipe = z3c.recipe.usercrontab
times = @reboot
command = ${buildout:directory}/bin/supervisord


[supervisor]
recipe = collective.recipe.supervisor
user = admin 
supervisord-environment = CHAMELEON_CACHE=${buildout:directory}/cache, http_proxy="http://10.33.176.21:3128",ftp_proxy="http://10.33.176.21:3128",https_proxy="http://10.33.176.21:3128",no_proxy="localhost,127.0.0.1,10.33.202.27,10.33.202.29,10.33.202.34,10.33.202.25"

programs =
    100 zeo ${buildout:directory}/parts/zeoserver/bin/runzeo
    200 client1 ${buildout:directory}/bin/client1 [console]
    200 client2 ${buildout:directory}/bin/client2 [console]
